<mat-accordion>
  <mat-expansion-panel
    [expanded]="queryJSONOpen"
    (opened)="queryJSONOpen = true"
    (closed)="queryJSONOpen = false"
  >
    <mat-expansion-panel-header>
      <mat-panel-title>
        Click to {{ queryJSONOpen ? "hide" : "view" }} query
      </mat-panel-title>
      <mat-panel-description>
        This contains query and the endpoint used
      </mat-panel-description>
    </mat-expansion-panel-header>
    <div>
      <h3>Endpoint</h3>
      <pre>{{ api }}{{ endpoint }}</pre>
      <h3>Query submitted</h3>
      <ngx-json-viewer [expanded]="false" [json]="query"></ngx-json-viewer>
    </div>
  </mat-expansion-panel>
  <mat-expansion-panel
    [expanded]="metaJSONOpen"
    (opened)="metaJSONOpen = true"
    (closed)="metaJSONOpen = false"
  >
    <mat-expansion-panel-header>
      <mat-panel-title>
        Click to {{ metaJSONOpen ? "hide" : "view" }} metadata
      </mat-panel-title>
      <mat-panel-description>
        This contains metadata and response summary from the Beacon API
      </mat-panel-description>
    </mat-expansion-panel-header>
    <div>
      <h3>Response metadata</h3>
      <ngx-json-viewer
        [expanded]="false"
        [json]="results.meta"
      ></ngx-json-viewer>
      <h3>Response summary</h3>
      <ngx-json-viewer
        [expanded]="false"
        [json]="results.responseSummary"
      ></ngx-json-viewer>
    </div>
  </mat-expansion-panel>
  @if (results.response) {
    <mat-expansion-panel
      [expanded]="responseJSONOpen"
      (opened)="responseJSONOpen = true"
      (closed)="responseJSONOpen = false"
    >
      <mat-expansion-panel-header>
        <mat-panel-title>
          Click to {{ responseJSONOpen ? "hide" : "view" }} returned entries
        </mat-panel-title>
        <mat-panel-description>
          This contains the results response of the beacon
        </mat-panel-description>
      </mat-expansion-panel-header>
      <div>
        <h3>Response data</h3>
        <ngx-json-viewer
          [expanded]="false"
          [json]="results.response"
        ></ngx-json-viewer>
      </div>
    </mat-expansion-panel>
  }
  <mat-expansion-panel
    [expanded]="fullJSONOpen"
    (opened)="fullJSONOpen = true"
    (closed)="fullJSONOpen = false"
  >
    <mat-expansion-panel-header>
      <mat-panel-title>
        Click to {{ fullJSONOpen ? "hide" : "view" }} complete response
      </mat-panel-title>
      <mat-panel-description>
        This contains entire response of the beacon
      </mat-panel-description>
    </mat-expansion-panel-header>
    <div>
      <h3>Response</h3>
      <ngx-json-viewer [expanded]="false" [json]="results"></ngx-json-viewer>
    </div>
  </mat-expansion-panel>
</mat-accordion>
